<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–ì–æ–Ω–∫–∞</title>
<style>
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#222;color:#eee;display:flex;flex-direction:column;height:100vh}
  header{background:#111;padding:12px 20px;display:flex;justify-content:space-between;font-size:24px;font-weight:bold}
  .coins{background:#27ae60;padding:6px 14px;border-radius:8px}
  nav{background:#333;display:flex;justify-content:center;gap:20px;padding:10px 0}
  nav a{color:#eee;text-decoration:none;font-size:18px;padding:8px 16px;border-radius:6px;transition:background .3s}
  nav a:hover{background:#555}
  .track{background:#333;border-radius:10px;flex:1;position:relative;margin:20px;overflow:hidden}
  .lane{height:60px;border-bottom:2px solid #555;position:relative}
  .car{position:absolute;top:10px;width:60px;height:40px;transition:left .25s linear}
  .car img{width:100%;border-radius:6px}
  .controls{display:flex;justify-content:center;margin-bottom:20px}
  button{padding:12px 24px;font-size:18px;border:none;border-radius:8px;background:#27ae60;color:#fff;cursor:pointer}
  button:disabled{background:#555;cursor:default}
  #status{text-align:center;font-size:20px;margin-bottom:20px}
</style>
</head>
<body>

<header>
  <span>–í—ã vs –ë–æ—Ç</span>
  <span class="coins" id="coins">–ú–æ–Ω–µ—Ç—ã: 0</span>
</header>

<nav>
  <a href="menu.html">–ú–µ–Ω—é</a>
  <a href="garage.html">–ì–∞—Ä–∞–∂</a>
  <a href="rating.html">–†–µ–π—Ç–∏–Ω–≥</a>
  <a href="shop.html">–ú–∞–≥–∞–∑–∏–Ω</a>
</nav>

<div class="track">
  <div class="lane">
    <div class="car" id="botCar"><img src="https://i.imgur.com/8cM2bkP.png" alt="–ë–æ—Ç"/></div>
  </div>
  <div class="lane">
    <div class="car" id="playerCar"><img src="https://i.imgur.com/Y7kZ7Fu.png" alt="–í—ã"/></div>
  </div>
</div>

<div id="status">–ù–∞–∂–º–∏—Ç–µ ¬´–°—Ç–∞—Ä—Ç¬ª</div>
<div class="controls"><button id="startBtn">–°—Ç–∞—Ä—Ç</button></div>

<script>
  const COINS_KEY='coins';
  const MIN_COINS=1, MAX_COINS=5;

  function getCoins(){return parseInt(localStorage.getItem(COINS_KEY))||0}
  function setCoins(v){localStorage.setItem(COINS_KEY,v);updateUI()}
  function updateUI(){document.getElementById('coins').textContent='–ú–æ–Ω–µ—Ç—ã: '+getCoins()}

  const botCar   = document.getElementById('botCar');
  const playerCar= document.getElementById('playerCar');
  const status   = document.getElementById('status');
  const startBtn = document.getElementById('startBtn');
  const trackWidth=document.querySelector('.track').clientWidth-60;

  let running=false, timer=null;

  function reset(){
    botCar.style.left='0px';
    playerCar.style.left='0px';
    status.textContent='–ù–∞–∂–º–∏—Ç–µ ¬´–°—Ç–∞—Ä—Ç¬ª';
    startBtn.disabled=false;
  }

  function race(){
    if(running)return;
    running=true;
    startBtn.disabled=true;
    status.textContent='–ì–æ–Ω–∫–∞...';

    let b=0, p=0;
    timer=setInterval(()=>{
      b+=5+Math.floor(Math.random()*11);
      p+=5+Math.floor(Math.random()*11);

      botCar.style.left   =Math.min(b,trackWidth)+'px';
      playerCar.style.left=Math.min(p,trackWidth)+'px';

      if(b>=trackWidth||p>=trackWidth){
        clearInterval(timer);
        running=false;
        const win=p>=b;
        const coinsWin=win?MIN_COINS+Math.floor(Math.random()*(MAX_COINS-MIN_COINS+1)):0;
        status.textContent=win?`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! +${coinsWin} –º–æ–Ω–µ—Ç`:'–ë–æ—Ç –ø–æ–±–µ–¥–∏–ª üòî';
        if(win)setCoins(getCoins()+coinsWin);
        setTimeout(reset,2500);
      }
    },60);
  }

  startBtn.addEventListener('click',race);
  updateUI();
</script>
</body>
</html>
