
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Че еще надо то?</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #808080;
    margin: 0; padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  nav {
    margin-bottom: 20px;
  }
  nav a {
    margin: 0 12px;
    text-decoration: none;
    font-weight: bold;
    color: #2980b9;
    font-size: 18px;
    transition: color 0.3s;
  }
  nav a:hover {
    color: #1c5980;
    text-decoration: underline;
  }

  .main-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 40px;
    width: 100%;
    max-width: 900px;
    margin-bottom: 30px;
  }

  .slot-group {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 90px;
  }

  .slot {
    height: 70px;
    border: 2px dashed #666;
    border-radius: 12px;
    background: #f7f7f7;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .slot.drag-over {
    border-color: #2980b9;
    background-color: #d0e7ff;
  }

  .car-container {
    width: 280px;
    display: flex;
    justify-content: center;
  }
  .car-container img {
    width: 100%;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
  }

  #inventory {
    display: grid;
    grid-template-columns: repeat(6, 60px);
    grid-template-rows: repeat(5, 60px);
    gap: 12px;
    width: max-content;
  }
  #inventory .slot {
    border: 2px dashed #ccc;
    border-radius: 10px;
    background: #fff;
    cursor: pointer;
  }
  #inventory .slot.drag-over {
    border-color: #2980b9;
    background-color: #e1f0ff;
  }
  #inventory .slot.filled {
    border-style: solid;
    border-color: #666;
  }

  .cube {
    width: 56px;
    height: 56px;
    border-radius: 10px;
    cursor: grab;
    box-shadow: 0 2px 7px rgba(0,0,0,0.15);
    user-select: none;
    transition: transform 0.15s ease;
  }
  .cube:active {
    cursor: grabbing;
    transform: scale(1.1);
  }

  .red { background: #e74c3c; }
  .green { background: #27ae60; }
  .blue { background: #2980b9; }
  .yellow { background: #f1c40f; }
  .orange { background: #e67e22; }
  .purple { background: #8e44ad; }

</style>
</head>
<body>

<nav>
  <a href="menu.html">Меню</a>
  <a href="race.html">Гонка</a>
  <a href="rating.html">Рейтинг</a>
  <a href="shop.html">Магазин</a>
</nav>

<div class="main-container">

  <div class="slot-group" aria-label="Левые слоты">
    <div class="slot" data-allowed-color="red" title="Красный слот"></div>
    <div class="slot" data-allowed-color="green" title="Зеленый слот"></div>
    <div class="slot" data-allowed-color="blue" title="Синий слот"></div>
  </div>

  <div class="car-container">
    <img src="https://astra-faq.ru/wp-content/uploads/2025/12/wx1-3207.png" alt="ВАЗ" />
  </div>

  <div class="slot-group" aria-label="Правые слоты">
    <div class="slot" data-allowed-color="yellow" title="Жёлтый слот"></div>
    <div class="slot" data-allowed-color="orange" title="Оранжевый слот"></div>
    <div class="slot" data-allowed-color="purple" title="Фиолетовый слот"></div>
  </div>

</div>

<div id="inventory" aria-label="Инвентарь кубов">
  <!-- 5x6 ячеек -->
</div>

  
// Код счётчика монет для добавления в гараж

// 1. Добавьте в HTML в нужном месте (например, в шапке или рядом с инвентарём):
<div id="coinsDisplay" style="font-weight:bold; font-size:18px; margin-bottom:10px;">Монеты: 0</div>

<!-- Пример для вставки около инвентаря -->
<div class="inventory">
  <div id="coinsDisplay" style="font-weight:bold; font-size:18px; margin-bottom:10px;">Монеты: 0</div>
  <ul>
    <li>Покрышки: 3 шт.</li>
    <li>Масло: 5 л.</li>
    <li>Тормозные колодки: 2 комплекта</li>
  </ul>
</div>
  
<script>


// 2. Добавьте этот скрипт в <script> после загрузки DOM (в конце body или после элемента coinsDisplay):

<script>
  // Ключ для хранения монет (должен совпадать с вашим ключом сохранения)
  const COINS_KEY = 'playerCoins';

  // Получаем элемент для отображения
  const coinsDisplay = document.getElementById('coinsDisplay');

  // Функция получения монет из localStorage (или 0 если нет)
  function getCoins() {
    return parseInt(localStorage.getItem(COINS_KEY)) || 0;
  }

  // Обновляем текст с монетами
  function updateCoinsDisplay() {
    coinsDisplay.textContent = `Монеты: ${getCoins()}`;
  }

  // Запускаем обновление при загрузке страницы
  updateCoinsDisplay();
  
  const colors = ['red','green','blue','yellow','orange','purple'];
  const inventory = document.getElementById('inventory');

  // Создаем 5x6 ячеек для инвентаря
  for(let i=0; i<30; i++){
    const slot = document.createElement('div');
    slot.classList.add('slot');
    slot.dataset.position = i; // уникальная позиция для слота в инвентаре
    inventory.appendChild(slot);
  }

  // Разложим по ячейкам кубы — один экземпляр каждого цвета в первых 6 ячейках
  const invSlots = inventory.querySelectorAll('.slot');
  colors.forEach((color, index) => {
    const cube = createCube(color);
    invSlots[index].appendChild(cube);
    invSlots[index].classList.add('filled');
  });

  function createCube(color) {
    const cube = document.createElement('div');
    cube.classList.add('cube', color);
    cube.setAttribute('draggable', 'true');
    cube.dataset.color = color;
    cube.title = color.charAt(0).toUpperCase() + color.slice(1) + ' куб';
    return cube;
  }

  let draggedCube = null;

  function onDragStart(e){
    draggedCube = e.target;
    e.dataTransfer.setData('text/plain', draggedCube.dataset.color);
    e.dataTransfer.effectAllowed = 'move';
    setTimeout(() => draggedCube.style.visibility = 'hidden', 0);
  }

  function onDragEnd(e){
    if (draggedCube) draggedCube.style.visibility = 'visible';
    draggedCube = null;
    document.querySelectorAll('.slot').forEach(s => s.classList.remove('drag-over'));
  }

  function onDragOver(e){
    e.preventDefault();
    // Проверяем, можно ли ставить куб в этот слот по цвету (если указано)
    if (!this.hasChildNodes()) {
      const allowedColor = this.dataset.allowedColor;
      const cubeColor = draggedCube?.dataset.color;
      if (!allowedColor || allowedColor === cubeColor) {
        this.classList.add('drag-over');
        e.dataTransfer.dropEffect = 'move';
      } else {
        e.dataTransfer.dropEffect = 'none';
      }
    }
  }

  function onDragLeave(e){
    this.classList.remove('drag-over');
  }

  function onDrop(e){
    e.preventDefault();
    this.classList.remove('drag-over');
    if(!draggedCube) return;

    // Если в слоте уже есть куб — отменяем действие
    if(this.children.length > 0) return;

    // Проверяем цвет куба и слота
    const allowedColor = this.dataset.allowedColor;
    const cubeColor = draggedCube.dataset.color;
    if (allowedColor && allowedColor !== cubeColor) {
      // Несовпадение цвета — запрещаем
      return;
    }

    // Перемещаем куб в новый слот
    draggedCube.parentElement.classList.remove('filled');
    this.appendChild(draggedCube);
    this.classList.add('filled');

    draggedCube.setAttribute('draggable', 'true');
  }

  // Навешиваем события на кубы
  function attachDragEvents(element){
    element.addEventListener('dragstart', onDragStart);
    element.addEventListener('dragend', onDragEnd);
  }

  // Устанавливаем обработчики событий на все слоты
  function enableSlots(){
    document.querySelectorAll('.slot').forEach(slot => {
      slot.addEventListener('dragover', onDragOver);
      slot.addEventListener('dragleave', onDragLeave);
      slot.addEventListener('drop', onDrop);
    });
  }

  // Инициализация
  document.querySelectorAll('.cube').forEach(attachDragEvents);
  enableSlots();

  // Обработчик для динамически добавленных кубов (в случае)
  new MutationObserver(mutations => {
    mutations.forEach(mutation => {
      mutation.addedNodes.forEach(node => {
        if(node.classList && node.classList.contains('cube')){
          attachDragEvents(node);
        }
      });
    });
  }).observe(inventory, { childList: true, subtree: true });

</script>

</body>
</html>
