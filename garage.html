
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Гонка с Кубами и Инвентарь 5x6</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fafafa;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  nav {
    margin-bottom: 25px;
  }
  nav a {
    margin: 0 12px;
    text-decoration: none;
    font-weight: bold;
    color: #2980b9;
    font-size: 18px;
    transition: color 0.3s;
  }
  nav a:hover {
    color: #1c5980;
    text-decoration: underline;
  }

  /* Контейнер всей страницы */
  .page-container {
    display: flex;
    gap: 30px;
    align-items: flex-start;
    width: 100%;
    max-width: 1100px;
  }

  /* Левая часть - Машина */
  .car-container {
    width: 280px;
  }
  .car-container img {
    width: 100%;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
  }

  /* Правая часть - Слоты для кубов */
  .slots-container {
    display: flex;
    flex-direction: column;
    gap: 25px;
    width: 140px;
  }
  .slot {
    height: 70px;
    border: 2px dashed #666;
    border-radius: 12px;
    background: #f7f7f7;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .slot.drag-over {
    border-color: #2980b9;
    background-color: #d0e7ff;
  }

  /* Инвентарь по центру - 5x6 сетка */
  #inventory {
    display: grid;
    grid-template-columns: repeat(6, 60px);
    grid-template-rows: repeat(5, 60px);
    gap: 10px;
    background: #fff;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 5px 18px rgba(0,0,0,0.1);
  }

  /* Кубы в инвентаре и слотах */
  .cube {
    width: 60px;
    height: 60px;
    border-radius: 10px;
    cursor: grab;
    box-shadow: 0 2px 7px rgba(0,0,0,0.15);
    user-select: none;
    transition: transform 0.15s ease;
  }
  .cube:active {
    cursor: grabbing;
    transform: scale(1.1);
  }

  /* Цвета кубов */
  .red { background: #e74c3c; }
  .green { background: #27ae60; }
  .blue { background: #2980b9; }
  .yellow { background: #f1c40f; }
  .orange { background: #e67e22; }
  .purple { background: #8e44ad; }

</style>
</head>
<body>

<nav>
  <a href="menu.html">Меню</a>
  <a href="race.html">Гонка</a>
  <a href="rating.html">Рейтинг</a>
  <a href="shop.html">Магазин</a>
</nav>

<div class="page-container">

  <div class="car-container">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/VAZ_2110_front_20100615.jpg/320px-VAZ_2110_front_20100615.jpg" alt="ВАЗ 2110">
  </div>

  <div id="inventory">
    <!-- Кубы 5 на 6 = 30 ячеек, заполним разными цветами -->
    <!-- Используем 5x6 = 30, разных кубов 6 цветов по 5 штук -->
  </div>

  <div class="slots-container">
    <div class="slot" data-allowed-color="red" title="Красный слот"></div>
    <div class="slot" data-allowed-color="green" title="Зеленый слот"></div>
    <div class="slot" data-allowed-color="blue" title="Синий слот"></div>
  </div>

</div>

<div class="slots-container" style="margin-top:20px;">
  <div class="slot" data-allowed-color="yellow" title="Жёлтый слот"></div>
  <div class="slot" data-allowed-color="orange" title="Оранжевый слот"></div>
  <div class="slot" data-allowed-color="purple" title="Фиолетовый слот"></div>
</div>

<script>
  // Создадим кубы разного цвета, по 5 штук каждого цвета
  const colors = ['red','green','blue','yellow','orange','purple'];
  const inventory = document.getElementById('inventory');

  function createCube(color) {
    const cube = document.createElement('div');
    cube.classList.add('cube', color);
    cube.setAttribute('draggable', 'true');
    cube.dataset.color = color;
    cube.title = capitalize(color) + ' куб';
    return cube;
  }

  function capitalize(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  for(let c of colors){
    for(let i=0; i<5; i++){
      inventory.appendChild(createCube(c));
    }
  }

  // Драг-н-дроп
  let draggedCube = null;

  function handleDragStart(e){
    draggedCube = e.target;
    e.dataTransfer.setData('text/plain', draggedCube.dataset.color);
    e.dataTransfer.effectAllowed = 'move';
    setTimeout(() => draggedCube.style.visibility = 'hidden', 0);
  }
  function handleDragEnd(e){
    if(draggedCube) draggedCube.style.visibility = 'visible';
    draggedCube = null;
    slots.forEach(s => s.classList.remove('drag-over'));
    inventories.forEach(inv => inv.classList.remove('drag-over'));
  }

  function handleDragOver(e){
    e.preventDefault();
    this.classList.add('drag-over');
  }
  function handleDragLeave(e){
    this.classList.remove('drag-over');
  }

  function handleDrop(e){
    e.preventDefault();
    this.classList.remove('drag-over');
    if(!draggedCube) return;

    const draggedColor = draggedCube.dataset.color;
    const allowedColor = this.dataset.allowedColor;

    const isSlot = this.classList.contains('slot');
    const isInventory = this.id === 'inventory';

    // Если слот - проверяем цвет
    if(isSlot){
      if(draggedColor !== allowedColor){
        alert(`В этот слот можно положить только куб цвета "${capitalize(allowedColor)}"`);
        return;
      }
      // Если в слоте уже есть куб, вернуть его в инвентарь
      if(this.children.length > 0){
        const existing = this.children[0];
        inventory.appendChild(existing);
        existing.setAttribute('draggable','true');
        existing.style.cursor = 'grab';
      }
      this.appendChild(draggedCube);
      draggedCube.setAttribute('draggable', 'false');
      draggedCube.style.cursor = 'default';
      return;
    }

    // Если инвентарь: куб можно вернуть в инвентарь из слота
    if(isInventory){
      if(draggedCube.parentElement && draggedCube.parentElement.classList.contains('slot')){
        draggedCube.parentElement.removeChild(draggedCube);
        inventory.appendChild(draggedCube);
        draggedCube.setAttribute('draggable', 'true');
        draggedCube.style.cursor = 'grab';
      }
      return;
    }
  }

  // Навесим события
  inventory.querySelectorAll('.cube').forEach(cube => {
    cube.addEventListener('dragstart', handleDragStart);
    cube.addEventListener('dragend', handleDragEnd);
    cube.style.cursor = 'grab';
  });

  const slots = document.querySelectorAll('.slot');
  const inventories = [inventory];

  slots.forEach(slot => {
    slot.addEventListener('dragover', handleDragOver);
    slot.addEventListener('dragleave', handleDragLeave);
    slot.addEventListener('drop', handleDrop);
  });

  inventories.forEach(inv => {
    inv.addEventListener('dragover', handleDragOver);
    inv.addEventListener('dragleave', handleDragLeave);
    inv.addEventListener('drop', handleDrop);
  });

</script>
</body>
</html>
